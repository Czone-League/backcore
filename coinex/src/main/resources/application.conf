akka {
	extensions = [
		"akka.contrib.pattern.DistributedPubSubExtension",
		"akka.contrib.pattern.ClusterReceptionistExtension"
	]

	debug {
		lifecycle = on
	}
	
	log-dead-letters = 0
	log-dead-letters-during-shutdown = false
	loglevel = INFO

	actor {
		provider = "akka.cluster.ClusterActorRefProvider"
		serialize-messages = on
		serialize-creators = off // on will make rest server fail
		
		deployment {
			/accountProcessorRouter {
				router = round-robin-group
				nr-of-instances = 1
				routees.paths = ["/user/accountProcessor/singleton"]
				cluster {
					enabled = on
					allow-local-routees = on
				}
			}
			
			/accountViewRouter {
				router = round-robin-group
				nr-of-instances = 3
				routees.paths = ["/user/accountView"]
				cluster {
					enabled = on
					allow-local-routees = on
				}
			}
			/marketProcessorRouter {
				router = round-robin-group
				nr-of-instances = 1
				routees.paths = ["/user/marketProcessor/singleton"]
				cluster {
					enabled = on
					allow-local-routees = on
				}
			}
			
			/marketViewRouter {
				router = round-robin-group
				nr-of-instances = 3
				routees.paths = ["/user/marketView"]
				cluster {
					enabled = on
					allow-local-routees = on
				}
			}	
		}
	}
	remote {
		enabled-transports = ["akka.remote.netty.tcp"]
		netty.tcp {
		hostname = "127.0.0.1"
		port = 0
		}
	}
	cluster {
		roles = ["account_processor", "account_view", "market_processor", "market_view"]
		auto-down-unreachable-after = 5s
		role {
			//frontend.min-nr-of-members = 1
		}
		seed-nodes = [
			"akka.tcp://coinex@127.0.0.1:2551",
			"akka.tcp://coinex@127.0.0.1:2552"
		]
		
	}
	
	// persistence.journal.plugin = "akka.persistence.journal.leveldb-shared"
	persistence.journal.plugin = "casbah-journal"
	casbah-journal.mongo-url = "mongodb://127.0.0.1:27017/coinex.journals"
	
	spray {
  		# check the reference.conf in /spray-can/main/resources for all defined settings
  		can.server {
    		request-timeout = 2s
  		}

  		# check the reference.conf in /spray-routing/main/resources for all defined settings
  		routing {
    		file-chunking-threshold-size = 10k
    		file-chunking-chunk-size = 5k
  		}
	}
}

coinex {
  rest-http-port = 8080
}